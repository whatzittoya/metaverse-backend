"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const vitest_1 = require("vitest");
const add_field_flag_1 = require("./add-field-flag");
(0, vitest_1.describe)('addFieldFlag', () => {
    (0, vitest_1.it)('Adds a flag to a field without meta', () => {
        const field = {
            field: 'some_field',
            type: 'string',
        };
        (0, add_field_flag_1.addFieldFlag)(field, 'cast-timestamp');
        (0, vitest_1.expect)(field.meta).toEqual({
            special: ['cast-timestamp'],
        });
    });
    (0, vitest_1.it)('Adds a flag to a field without existing flags', () => {
        const field = {
            field: 'some_field',
            type: 'string',
            meta: { special: null },
        };
        (0, add_field_flag_1.addFieldFlag)(field, 'cast-timestamp');
        (0, vitest_1.expect)(field.meta).toEqual({
            special: ['cast-timestamp'],
        });
    });
    (0, vitest_1.it)('Adds a flag to a field with existing flags', () => {
        const field = {
            field: 'some_field',
            type: 'string',
            meta: { special: ['cast-datetime'] },
        };
        (0, add_field_flag_1.addFieldFlag)(field, 'cast-timestamp');
        (0, vitest_1.expect)(field.meta).toEqual({
            special: ['cast-datetime', 'cast-timestamp'],
        });
    });
    (0, vitest_1.it)('Does not add a duplicate flag to a field with existing flags', () => {
        const field = {
            field: 'some_field',
            type: 'string',
            meta: { special: ['cast-datetime', 'cast-timestamp'] },
        };
        (0, add_field_flag_1.addFieldFlag)(field, 'cast-datetime');
        (0, vitest_1.expect)(field.meta).toEqual({
            special: ['cast-datetime', 'cast-timestamp'],
        });
    });
});
