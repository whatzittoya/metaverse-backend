"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const vitest_1 = require("vitest");
const tmp_1 = require("tmp");
const extensions_1 = require("../../constants/extensions");
const ensure_extension_dirs_1 = require("./ensure-extension-dirs");
(0, vitest_1.describe)('ensureExtensionDirs', () => {
    let rootDir;
    (0, vitest_1.beforeEach)(() => {
        rootDir = (0, tmp_1.dirSync)({ unsafeCleanup: true });
    });
    (0, vitest_1.afterEach)(() => {
        rootDir.removeCallback();
    });
    (0, vitest_1.it)('returns undefined if the folders exist', async () => {
        (0, vitest_1.expect)(await (0, ensure_extension_dirs_1.ensureExtensionDirs)(rootDir.name, extensions_1.EXTENSION_TYPES)).toBe(undefined);
    });
    (0, vitest_1.it)('throws an error when a folder can not be opened', () => {
        (0, vitest_1.expect)(async () => {
            await (0, ensure_extension_dirs_1.ensureExtensionDirs)('/.', extensions_1.EXTENSION_TYPES);
        }).rejects.toThrow(`Extension folder "/interfaces" couldn't be opened`);
    });
});
