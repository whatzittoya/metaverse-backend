"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.validateExtensionManifest = void 0;
const constants_1 = require("../constants");
const array_helpers_1 = require("./array-helpers");
function validateExtensionManifest(extensionManifest) {
    if (!extensionManifest.name || !extensionManifest.version) {
        return false;
    }
    const extensionOptions = extensionManifest[constants_1.EXTENSION_PKG_KEY];
    if (!extensionOptions) {
        return false;
    }
    if (!extensionOptions.type) {
        return false;
    }
    if (!(0, array_helpers_1.isIn)(extensionOptions.type, constants_1.EXTENSION_PACKAGE_TYPES)) {
        return false;
    }
    if ((0, array_helpers_1.isIn)(extensionOptions.type, constants_1.PACKAGE_EXTENSION_TYPES)) {
        if (!extensionOptions.host) {
            return false;
        }
    }
    else if ((0, array_helpers_1.isIn)(extensionOptions.type, constants_1.HYBRID_EXTENSION_TYPES)) {
        if (!extensionOptions.path ||
            !extensionOptions.source ||
            typeof extensionOptions.path === 'string' ||
            typeof extensionOptions.source === 'string' ||
            !extensionOptions.path.app ||
            !extensionOptions.path.api ||
            !extensionOptions.source.app ||
            !extensionOptions.source.api ||
            !extensionOptions.host) {
            return false;
        }
    }
    else {
        if (!extensionOptions.path || !extensionOptions.source || !extensionOptions.host) {
            return false;
        }
    }
    return true;
}
exports.validateExtensionManifest = validateExtensionManifest;
