import{T as ge,c as ye,w as De}from"./vue.runtime.esm-bundler.eb605ed6.js";import{u as Me,a as be,_ as B,b as ue,c as x,d as ce,M as Oe,t as Ue,g as Be,e as Ee,f as Ae,h as _e,l as je,p as Re,i as Pe,j as He,k as Te,m as fe,n as me,o as qe,q as Fe,H as We}from"./index.c9885941.entry.js";import{l as ie}from"./use-sync.d9160f34.js";import{storeToRefs as le}from"./pinia.24c7b35a.entry.js";import{useI18n as G}from"./vue-i18n.df8d89e7.entry.js";import{useRouter as $e}from"./vue-router.805cb517.entry.js";import{d as E,c as S,r as b,K as de,f as te,a as s,u as ee,v as T,o as a,b as _,w as r,x as I,e as l,y as j,G as ne,z as A,A as he,E as U,t as V,l as N,J as oe,P as ze,q as W,D as we,n as Ge,h as Qe,p as Je,I as k,m as Xe,B as Ke,C as Ye,M as Ze,N as xe}from"./runtime-core.esm-bundler.fe249c5c.js";const et=E({setup(){const{t:e}=G(),t=Me(),o=be(),u=S(()=>{var v;return o.settings===null||!((v=o.settings)!=null&&v.project_logo)?null:"/assets/"+o.settings.project_logo}),d=b(!1),{queueHasItems:c}=de(t);te(()=>c.value,v=>{v&&(d.value=!0)});const i=S(()=>{var v;return(v=o.settings)==null?void 0:v.project_url}),n=S(()=>{var v;return(v=o.settings)!=null&&v.project_url?e("view_project"):!1});return{customLogoPath:u,showLoader:d,stopSpinnerIfQueueIsEmpty:p,url:i,urlTooltip:n};function p(){c.value===!1&&(d.value=!1)}}});function tt(e,t,o,u,d,c){const i=s("v-progress-linear"),n=s("v-image"),p=ee("tooltip");return T((a(),_(he(e.url?"a":"div"),{href:e.url,target:e.url?"_blank":void 0,rel:e.url?"noopener noreferrer":void 0,class:A(["module-bar-logo",{loading:e.showLoader}])},{default:r(()=>[e.customLogoPath?(a(),I(ne,{key:0},[l(ge,{name:"fade"},{default:r(()=>[e.showLoader?(a(),_(i,{key:0,indeterminate:"",rounded:"",onAnimationiteration:e.stopSpinnerIfQueueIsEmpty},null,8,["onAnimationiteration"])):j("",!0)]),_:1}),l(n,{class:"custom-logo",src:e.customLogoPath,alt:"Project Logo"},null,8,["src"])],64)):(a(),I("div",{key:1,class:A(["logo",{running:e.showLoader}]),onAnimationiteration:t[0]||(t[0]=(...v)=>e.stopSpinnerIfQueueIsEmpty&&e.stopSpinnerIfQueueIsEmpty(...v))},null,34))]),_:1},8,["href","target","rel","class"])),[[p,e.urlTooltip,void 0,{right:!0}]])}const nt=B(et,[["render",tt],["__scopeId","data-v-96000481"]]),ot=E({setup(){const{t:e}=G(),t=ue(),o=x(),{notificationsDrawerOpen:u}=le(t),{unread:d}=le(o),c=ce(),i=b(!1),n=S(()=>{var $;return!c.currentUser||!("avatar"in c.currentUser)||!(($=c.currentUser)!=null&&$.avatar)?null:`/assets/${c.currentUser.avatar.id}?key=system-medium-cover`}),p=b(null),v=S(()=>{var m;return`/users/${(m=c.currentUser)==null?void 0:m.id}`}),y=S(()=>"/logout"),f=c.fullName;return{t:e,userFullName:f,avatarURL:n,userProfileLink:v,signOutActive:i,signOutLink:y,notificationsDrawerOpen:u,unread:d,avatarError:p}}});const st={class:"module-bar-avatar"};function at(e,t,o,u,d,c){const i=s("v-icon"),n=s("v-button"),p=s("v-badge"),v=s("v-card-title"),y=s("v-card-actions"),f=s("v-card"),$=s("v-dialog"),m=s("v-image"),H=s("v-avatar"),O=s("router-link"),D=s("v-hover"),R=ee("tooltip");return a(),I("div",st,[l(p,{value:e.unread,disabled:e.unread==0,class:"notifications-badge"},{default:r(()=>[T((a(),_(n,{tile:"",icon:"","x-large":"",class:"notifications",onClick:t[0]||(t[0]=C=>e.notificationsDrawerOpen=!0)},{default:r(()=>[l(i,{name:"notifications"})]),_:1})),[[R,e.t("notifications"),void 0,{right:!0}]])]),_:1},8,["value","disabled"]),l(D,null,{default:r(({hover:C})=>[l($,{modelValue:e.signOutActive,"onUpdate:modelValue":t[2]||(t[2]=M=>e.signOutActive=M),onEsc:t[3]||(t[3]=M=>e.signOutActive=!1)},{activator:r(({on:M})=>[l(ge,{name:"sign-out"},{default:r(()=>[C?T((a(),_(n,{key:0,tile:"",icon:"","x-large":"",class:"sign-out",onClick:M},{default:r(()=>[l(i,{name:"logout"})]),_:2},1032,["onClick"])),[[R,e.t("sign_out"),void 0,{right:!0}]]):j("",!0)]),_:2},1024)]),default:r(()=>[l(f,null,{default:r(()=>[l(v,null,{default:r(()=>[U(V(e.t("sign_out_confirm")),1)]),_:1}),l(y,null,{default:r(()=>[l(n,{secondary:"",onClick:t[1]||(t[1]=M=>e.signOutActive=!e.signOutActive)},{default:r(()=>[U(V(e.t("cancel")),1)]),_:1}),l(n,{to:e.signOutLink},{default:r(()=>[U(V(e.t("sign_out")),1)]),_:1},8,["to"])]),_:1})]),_:1})]),_:2},1032,["modelValue"]),l(O,{to:e.userProfileLink},{default:r(()=>[T((a(),_(H,{tile:"",large:"",class:A({"no-avatar":!e.avatarURL})},{default:r(()=>[e.avatarURL&&!e.avatarError?(a(),_(m,{key:0,src:e.avatarURL,alt:e.userFullName,class:"avatar-image",onError:t[4]||(t[4]=M=>e.avatarError=M)},null,8,["src","alt"])):(a(),_(i,{key:1,name:"account_circle"}))]),_:1},8,["class"])),[[R,e.userFullName,void 0,{right:!0}]])]),_:1},8,["to"])]),_:1})])}const rt=B(ot,[["render",at],["__scopeId","data-v-fe7202f3"]]),it=E({components:{ModuleBarLogo:nt,ModuleBarAvatar:rt},setup(){const e=be(),{modules:t}=Be(),o=S(()=>t.value.map(d=>d.id));return{modules:S(()=>{var d;return e.settings?((d=e.settings.module_bar)!=null?d:Oe).filter(c=>c.type==="link"?!0:c.enabled&&o.value.includes(c.id)).map(c=>{if(c.type==="link"){const n=ie.exports.omit(c,["url"]);return c.url.startsWith("/")?n.to=c.url:n.href=c.url,Ue(n)}const i=t.value.find(n=>n.id===c.id);return{...c,...t.value.find(n=>n.id===c.id),to:`/${i.id}`}}):[]})}}});const lt={class:"module-bar"},ut={class:"modules"};function ct(e,t,o,u,d,c){const i=s("module-bar-logo"),n=s("v-icon"),p=s("v-button"),v=s("module-bar-avatar"),y=ee("tooltip");return a(),I("div",lt,[l(i),N("div",ut,[(a(!0),I(ne,null,oe(e.modules,f=>T((a(),_(p,{key:f.id,icon:"","x-large":"",to:f.to,href:f.href,tile:"",style:ze(f.color?{"--v-button-color-active":f.color}:null)},{default:r(()=>[l(n,{name:f.icon},null,8,["name"])]),_:2},1032,["to","href","style"])),[[y,f.name,void 0,{right:!0}]])),128))]),l(v)])}const dt=B(it,[["render",ct],["__scopeId","data-v-74c5824c"]]),vt=E({setup(){const{t:e}=G(),{parsedInfo:t}=Ee(),o=x(),u=ce(),d=S(()=>o.dialogs);return{t:e,notifications:d,admin:u.isAdmin,done:i,getGitHubIssueLink:c};function c(n,p){var y,f,$,m;const v=`<!-- Please put a detailed explanation of the problem here. -->

---

### Project details
Directus Version: ${(y=t.value)==null?void 0:y.directus.version}
Environment: production
OS: ${(f=t.value)==null?void 0:f.os.type} ${($=t.value)==null?void 0:$.os.version}
Node: ${(m=t.value)==null?void 0:m.node.version}

### Error

Title: ${p.title||"none"}
Message: ${p.text||"none"}

<details>
<summary>Stack Trace</summary>
<pre>
${JSON.stringify(p.error,Object.getOwnPropertyNames(p.error),2)}
</pre>
</details>
			`;return`https://github.com/directus/directus/issues/new?body=${encodeURIComponent(v)}`}function i(n){o.remove(n)}}});const pt={class:"notification-dialogs"},_t=["href"];function ft(e,t,o,u,d,c){const i=s("v-card-title"),n=s("v-error"),p=s("v-card-text"),v=s("v-button"),y=s("v-card-actions"),f=s("v-card"),$=s("v-dialog");return a(),I("div",pt,[(a(!0),I(ne,null,oe(e.notifications,m=>(a(),_($,{key:m.id,"model-value":!0,persist:""},{default:r(()=>[l(f,{class:A([m.type])},{default:r(()=>[l(i,null,{default:r(()=>[U(V(m.title),1)]),_:2},1024),m.text||m.error?(a(),_(p,{key:0},{default:r(()=>[U(V(m.text)+" ",1),m.error?(a(),_(n,{key:0,error:m.error},null,8,["error"])):j("",!0)]),_:2},1024)):j("",!0),l(y,null,{default:r(()=>[m.type==="error"&&e.admin&&m.code==="UNKNOWN"?(a(),_(v,{key:0,secondary:""},{default:r(()=>[N("a",{target:"_blank",href:e.getGitHubIssueLink(m.id,m)},V(e.t("report_error")),9,_t)]),_:2},1024)):j("",!0),l(v,{onClick:H=>e.done(m.id)},{default:r(()=>[U(V(e.t("dismiss")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["class"])]),_:2},1024))),128))])}const mt=B(vt,[["render",ft],["__scopeId","data-v-2919ceeb"]]),gt=E({props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e){const{t}=G(),o=ue(),u=ce(),d=x(),c=Ae(),i=$e(),n=b([]),p=b(0),v=b(!1),y=b(null),f=b([]),$=b(["inbox"]),{notificationsDrawerOpen:m}=le(o),H=b([{text:t("subject"),value:"subject",sortable:!1,width:300,align:"left"},{text:t("timestamp"),value:"timestampDistance",sortable:!1,width:180,align:"left"}]);return O(),te([()=>e.modelValue,$],()=>O()),{tableHeaders:H,t,notificationsDrawerOpen:m,page:p,notifications:n,loading:v,error:y,selection:f,onRowClick:R,toggleArchive:D,tab:$};async function O(){v.value=!0;try{const C=await _e.get("/notifications",{params:{filter:{_and:[{recipient:{_eq:u.currentUser.id}},{status:{_eq:$.value[0]}}]},fields:["id","subject","collection","item","timestamp"],sort:["-timestamp"]}});await d.getUnreadCount();const M=C.data.data,q=[];for(const Q of M)q.push({...Q,timestampDistance:je(Re(Q.timestamp),new Date,{addSuffix:!0})});n.value=q}catch(C){y.value=C}finally{v.value=!1}}async function D(){await _e.patch("/notifications",{keys:f.value.map(({id:C})=>C),data:{status:$.value[0]==="inbox"?"archived":"inbox"}}),await O(),f.value=[]}function R({item:C}){var q;const M=c.getCollection(C.collection);(q=M==null?void 0:M.meta)!=null&&q.singleton?i.push(`/content/${C.collection}`):i.push(`/content/${C.collection}/${C.item}`),m.value=!1}}});function yt(e,t,o,u,d,c){const i=s("v-icon"),n=s("v-button"),p=s("v-list-item-icon"),v=s("v-list-item-content"),y=s("v-tab"),f=s("v-tabs"),$=s("v-info"),m=s("v-table"),H=s("v-drawer"),O=ee("tooltip");return a(),_(H,{modelValue:e.notificationsDrawerOpen,"onUpdate:modelValue":t[3]||(t[3]=D=>e.notificationsDrawerOpen=D),icon:"notifications",title:e.t("notifications"),onCancel:t[4]||(t[4]=D=>e.notificationsDrawerOpen=!1)},{actions:r(()=>[T((a(),_(n,{icon:"",rounded:"",disabled:e.selection.length===0,secondary:"",onClick:e.toggleArchive},{default:r(()=>[l(i,{name:e.tab[0]==="inbox"?"archive":"move_to_inbox"},null,8,["name"])]),_:1},8,["disabled","onClick"])),[[O,e.tab[0]==="inbox"?e.t("archive"):e.t("unarchive"),void 0,{bottom:!0}]])]),sidebar:r(()=>[l(f,{modelValue:e.tab,"onUpdate:modelValue":t[0]||(t[0]=D=>e.tab=D),vertical:""},{default:r(()=>[l(y,{value:"inbox"},{default:r(()=>[l(p,null,{default:r(()=>[l(i,{name:"inbox"})]),_:1}),l(v,null,{default:r(()=>[U(V(e.t("inbox")),1)]),_:1})]),_:1}),l(y,{value:"archived"},{default:r(()=>[l(p,null,{default:r(()=>[l(i,{name:"archive"})]),_:1}),l(v,null,{default:r(()=>[U(V(e.t("archive")),1)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),default:r(()=>[!e.loading&&e.notifications.length===0?(a(),_($,{key:0,icon:"notifications",title:e.t("no_notifications"),center:""},{default:r(()=>[U(V(e.t("no_notifications_copy")),1)]),_:1},8,["title"])):(a(),_(m,{key:1,modelValue:e.selection,"onUpdate:modelValue":t[1]||(t[1]=D=>e.selection=D),headers:e.tableHeaders,"onUpdate:headers":t[2]||(t[2]=D=>e.tableHeaders=D),"show-select":"",loading:e.loading,items:e.notifications,"item-key":"id","onClick:row":e.onRowClick},null,8,["modelValue","headers","loading","items","onClick:row"]))]),_:1},8,["modelValue","title"])}const bt=B(gt,[["render",yt],["__scopeId","data-v-ab4574fe"]]),$t=E({props:{id:{type:String,required:!0},title:{type:String,required:!0},text:{type:String,default:null},icon:{type:String,default:null},type:{type:String,default:"info",validator:e=>["info","success","warning","error"].includes(e)},tail:{type:Boolean,default:!1},dense:{type:Boolean,default:!1},showClose:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},progress:{type:Number,default:void 0}},setup(e){const t=x();return{close:o};function o(){e.showClose===!0&&t.remove(e.id)}}});const ht={key:0,class:"icon"},wt={class:"content"},kt={class:"title selectable"},St={key:0,class:"text selectable"};function It(e,t,o,u,d,c){const i=s("v-progress-circular"),n=s("v-icon");return a(),I("div",{class:A(["notification-item",[e.type,{tail:e.tail,dense:e.dense}]]),onClick:t[0]||(t[0]=(...p)=>e.close&&e.close(...p))},[e.loading||e.progress||e.icon?(a(),I("div",ht,[e.loading?(a(),_(i,{key:0,indeterminate:"",small:""})):e.progress?(a(),_(i,{key:1,small:"",value:e.progress},null,8,["value"])):(a(),_(n,{key:2,name:e.icon},null,8,["name"]))])):j("",!0),N("div",wt,[N("p",kt,V(e.title),1),e.text?(a(),I("p",St,V(e.text),1)):j("",!0)]),e.showClose?(a(),_(n,{key:1,name:"close",clickable:"",class:"close",onClick:e.close},null,8,["onClick"])):j("",!0)],2)}const ke=B($t,[["render",It],["__scopeId","data-v-747a928d"]]),Ct=E({components:{NotificationItem:ke},props:{sidebarOpen:{type:Boolean,default:!1}},setup(){const e=x();return{queue:de(e).queue}}});function Lt(e,t,o,u,d,c){const i=s("notification-item");return a(),_(ye,{class:A(["notifications-group",{"sidebar-open":e.sidebarOpen}]),name:"slide-fade",tag:"div"},{default:r(()=>[W(e.$slots,"default",{},void 0,!0),(a(!0),I(ne,null,oe(e.queue,(n,p)=>(a(),_(i,we({key:n.id},n,{tail:p===e.queue.length-1,dense:e.sidebarOpen===!1,"show-close":n.persist===!0&&n.closeable!==!1}),null,16,["tail","dense","show-close"]))),128))]),_:3},8,["class"])}const Nt=B(Ct,[["render",Lt],["__scopeId","data-v-96e092f9"]]),Vt=E({props:{to:{type:String,default:null},icon:{type:String,default:"box"},active:{type:Boolean,default:!1}},emits:["click"],setup(){const e=ue(),{sidebarOpen:t}=de(e);return{sidebarOpen:t}}});const Dt={class:"icon"},Mt={key:0,class:"title"};function Ot(e,t,o,u,d,c){const i=s("v-icon");return a(),_(he(e.to?"router-link":"button"),{class:A(["sidebar-button",{active:e.active}]),onClick:t[0]||(t[0]=n=>e.$emit("click",n))},{default:r(()=>[N("div",Dt,[l(i,{name:e.icon},null,8,["name"])]),e.sidebarOpen?(a(),I("div",Mt,[W(e.$slots,"default",{},void 0,!0)])):j("",!0)]),_:3},8,["class"])}const Ut=B(Vt,[["render",Ot],["__scopeId","data-v-a096d611"]]),Bt=E({components:{SidebarButton:Ut,NotificationItem:ke},props:{sidebarOpen:{type:Boolean,default:!1},modelValue:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(){const{t:e}=G(),t=x();return{t:e,lastFour:t.lastFour}}});const Et={class:"notifications-preview"},At={key:0,class:"inline"},jt={class:"padding-box"};function Rt(e,t,o,u,d,c){const i=s("router-link"),n=s("notification-item"),p=s("transition-expand"),v=s("sidebar-button"),y=ee("tooltip");return a(),I("div",Et,[l(p,{tag:"div"},{default:r(()=>[e.modelValue?(a(),I("div",At,[N("div",jt,[l(i,{class:A(["link",{"has-items":e.lastFour.length>0}]),to:"/activity"},{default:r(()=>[U(V(e.t("show_all_activity")),1)]),_:1},8,["class"]),l(ye,{tag:"div",name:"notification",class:"transition"},{default:r(()=>[(a(!0),I(ne,null,oe(e.lastFour,f=>(a(),_(n,we({key:f.id},f),null,16))),128))]),_:1})])])):j("",!0)]),_:1}),T((a(),_(v,{active:e.modelValue,class:"toggle",icon:"pending_actions",onClick:t[0]||(t[0]=f=>e.$emit("update:modelValue",!e.modelValue))},{default:r(()=>[U(V(e.t("activity_log")),1)]),_:1},8,["active"])),[[y,e.t("activity_log"),void 0,{left:!0}]])])}const Pt=B(Bt,[["render",Rt],["__scopeId","data-v-243bee4a"]]);var K=1e3,Y=K*60,Z=Y*60,z=Z*24,Ht=z*7,Tt=z*365.25,ae=function(e,t){t=t||{};var o=typeof e;if(o==="string"&&e.length>0)return qt(e);if(o==="number"&&isFinite(e))return t.long?Wt(e):Ft(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function qt(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!!t){var o=parseFloat(t[1]),u=(t[2]||"ms").toLowerCase();switch(u){case"years":case"year":case"yrs":case"yr":case"y":return o*Tt;case"weeks":case"week":case"w":return o*Ht;case"days":case"day":case"d":return o*z;case"hours":case"hour":case"hrs":case"hr":case"h":return o*Z;case"minutes":case"minute":case"mins":case"min":case"m":return o*Y;case"seconds":case"second":case"secs":case"sec":case"s":return o*K;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}function Ft(e){var t=Math.abs(e);return t>=z?Math.round(e/z)+"d":t>=Z?Math.round(e/Z)+"h":t>=Y?Math.round(e/Y)+"m":t>=K?Math.round(e/K)+"s":e+"ms"}function Wt(e){var t=Math.abs(e);return t>=z?re(e,t,z,"day"):t>=Z?re(e,t,Z,"hour"):t>=Y?re(e,t,Y,"minute"):t>=K?re(e,t,K,"second"):e+" ms"}function re(e,t,o,u){var d=t>=o*1.5;return Math.round(e/o)+" "+u+(d?"s":"")}const zt=E({setup(){const{t:e}=G(),t=Pe(),o=S(()=>{const n=ie.exports.sortBy(t.latency,["timestamp"]);return n[n.length-1]}),u=S(()=>{if(!t.latency||t.latency.length===0)return 0;const n=ie.exports.sortBy(t.latency,["timestamp"]),p=n.slice(Math.max(n.length-5,0));let v=0;for(const{latency:y}of p)v+=y;return Math.round(v/p.length)}),d=S(()=>u.value<=250?4:u.value>250&&u.value<=500?3:u.value>500&&u.value<=750?2:1),c=S(()=>{switch(d.value){case 4:return`${e("connection_excellent")}
(${ae(u.value)} ${e("latency")})`;case 3:return`${e("connection_good")}
(${ae(u.value)} ${e("latency")})`;case 2:return`${e("connection_fair")}
(${ae(u.value)} ${e("latency")})`;case 1:return`${e("connection_poor")}
(${ae(u.value)} ${e("latency")})`;default:return null}});return{icon:S(()=>{switch(d.value){case 4:return"signal_wifi_4_bar";case 3:return"signal_wifi_3_bar";case 2:return"signal_wifi_2_bar";case 1:return"signal_wifi_1_bar";default:return null}}),lastLatency:o,latencyTooltip:c}}});const Gt={class:"latency-indicator"};function Qt(e,t,o,u,d,c){const i=s("v-progress-circular"),n=s("v-icon"),p=ee("tooltip");return T((a(),I("div",Gt,[e.lastLatency?(a(),_(n,{key:1,name:e.icon},null,8,["name"])):(a(),_(i,{key:0,indeterminate:""}))])),[[p,e.latencyTooltip,void 0,{bottom:!0,end:!0}]])}const Jt=B(zt,[["render",Qt],["__scopeId","data-v-759bb63e"]]),Xt=E({components:{LatencyIndicator:Jt},setup(){const e=He(),t=S(()=>{var u,d;return(d=(u=e.info)==null?void 0:u.project)==null?void 0:d.project_name}),o=S(()=>{var u,d;return(d=(u=e.info)==null?void 0:u.project)==null?void 0:d.project_descriptor});return{name:t,descriptor:o}}});const Kt={class:"project-info"},Yt={class:"name-container"};function Zt(e,t,o,u,d,c){const i=s("latency-indicator"),n=s("v-text-overflow");return a(),I("div",Kt,[l(i),N("div",Yt,[l(n,{placement:"right",class:"name",text:e.name},null,8,["text"]),e.descriptor?(a(),_(n,{key:0,placement:"right",class:"descriptor",text:e.descriptor},null,8,["text"])):j("",!0)])])}const xt=B(Xt,[["render",Zt],["__scopeId","data-v-83fb9d28"]]),en=E({props:{sidebarOpen:{type:Boolean,default:!1}},setup(e){const t=b([]),o=b(!1);return te(()=>e.sidebarOpen,async u=>{u===!1?t.value=[]:(o.value=!0,await Ge(),o.value=!1)}),{openDetail:t,mandatory:o}}});function tn(e,t,o,u,d,c){const i=s("v-item-group");return a(),_(i,{modelValue:e.openDetail,"onUpdate:modelValue":t[0]||(t[0]=n=>e.openDetail=n),class:"sidebar-detail-group",scope:"sidebar-detail",mandatory:e.mandatory},{default:r(()=>[W(e.$slots,"default",{},void 0,!0)]),_:3},8,["modelValue","mandatory"])}const nn=B(en,[["render",tn],["__scopeId","data-v-8d500103"]]),on=e=>(Ze("data-v-576e3197"),e=e(),xe(),e),sn={class:"module-nav-content"},an={class:"flex-container"},rn=on(()=>N("div",{class:"spacer"},null,-1)),ln=E({__name:"private-view",props:{title:{default:null},smallHeader:{type:Boolean,default:!1}},setup(e){const t=e,{t:o}=G(),u=$e(),d=b(),c=b(),{width:i}=Te(),{width:n}=fe(d),{width:p}=fe(c),v=b(),{handleHover:y,onResizeHandlePointerDown:f,resetModuleNavWidth:$,onPointerMove:m,onPointerUp:H}=Ie();me(window,"pointermove",m),me(window,"pointerup",H);const{data:O}=qe("module-nav-width");Qe(()=>{!O.value||Number.isNaN(O.value)||(v.value.style.width=`${O.value}px`)});const{title:D}=de(t),R=b(!1),C=ce(),M=ue(),q=S(()=>{var w,g;return C.currentUser?((g=(w=C.currentUser)==null?void 0:w.role)==null?void 0:g.app_access)||!1:!0}),Q=b(!1),{sidebarOpen:P,fullScreen:pe}=le(M),Se=S(()=>{var w;return((w=C.currentUser)==null?void 0:w.theme)||"auto"});Je("main-element",d),u.afterEach(async(w,g)=>{var F;w.path!==g.path&&((F=d.value)==null||F.scrollTo({top:0}),pe.value=!1)}),Fe(D);function Ie(){const w=b(!1),g=b(!1),F=b(0),se=b(0),L=b(null),h=b(0),J=b(null);return te(L,ie.exports.debounce(X=>{X===220?O.value=null:O.value=X},300)),te([i,n,p],()=>{i.value>1260?h.value=i.value-(590+60+p.value):i.value>960?h.value=i.value-(590+60+60):h.value=i.value-(60+60),L.value&&L.value>h.value&&(L.value=Math.max(220,h.value),v.value.style.width=`${L.value}px`)},{immediate:!0}),{handleHover:w,onResizeHandlePointerDown:ve,resetModuleNavWidth:Le,onPointerMove:Ne,onPointerUp:Ve};function ve(X){g.value=!0,F.value=X.pageX,se.value=v.value.offsetWidth}function Le(){L.value=220,v.value.style.width="220px"}function Ne(X){!g.value||(J.value=window.requestAnimationFrame(()=>{L.value=Math.max(220,se.value+(X.pageX-F.value)),L.value>=h.value&&(L.value=h.value),L.value>220&&L.value<=230&&(L.value=220),v.value.style.width=`${L.value}px`}))}function Ve(){g.value===!0&&(g.value=!1,J.value&&window.cancelAnimationFrame(J.value))}}function Ce(w){w.target&&w.target.classList.contains("close")===!1&&(P.value=!0)}return(w,g)=>{const F=s("v-button"),se=s("v-info"),L=s("v-overlay");return k(q)===!1?(a(),_(se,{key:0,center:"",title:k(o)("no_app_access"),type:"danger",icon:"block"},{append:r(()=>[l(F,{to:"/logout"},{default:r(()=>[U(V(k(o)("switch_user")),1)]),_:1})]),default:r(()=>[U(V(k(o)("no_app_access_copy"))+" ",1)]),_:1},8,["title"])):(a(),I("div",{key:1,class:A(["private-view",{theme:k(Se),"full-screen":k(pe)}])},[N("aside",{id:"navigation",role:"navigation","aria-label":"Module Navigation",class:A({"is-open":R.value})},[l(dt),N("div",{ref_key:"moduleNavEl",ref:v,class:"module-nav alt-colors"},[l(xt),N("div",sn,[W(w.$slots,"navigation",{},void 0,!0)]),N("div",{class:A(["module-nav-resize-handle",{active:k(y)}]),onPointerenter:g[0]||(g[0]=h=>y.value=!0),onPointerleave:g[1]||(g[1]=h=>y.value=!1),onPointerdown:g[2]||(g[2]=De((...h)=>k(f)&&k(f)(...h),["self"])),onDblclick:g[3]||(g[3]=(...h)=>k($)&&k($)(...h))},null,34)],512)],2),N("div",{id:"main-content",ref_key:"contentEl",ref:d,class:"content"},[l(We,{small:e.smallHeader,"show-sidebar-toggle":"",title:k(D),"onToggle:sidebar":g[4]||(g[4]=h=>P.value=!k(P)),onPrimary:g[5]||(g[5]=h=>R.value=!R.value)},Xe({_:2},[oe(w.$slots,(h,J)=>({name:J,fn:r(ve=>[W(w.$slots,J,Ke(Ye(ve)),void 0,!0)])}))]),1032,["small","title"]),N("main",null,[W(w.$slots,"default",{},void 0,!0)])],512),N("aside",{id:"sidebar",ref_key:"sidebarEl",ref:c,role:"contentinfo",class:A(["alt-colors",{"is-open":k(P)}]),"aria-label":"Module Sidebar",onClick:Ce},[N("div",an,[l(nn,{"sidebar-open":k(P)},{default:r(()=>[W(w.$slots,"sidebar",{},void 0,!0)]),_:3},8,["sidebar-open"]),rn,l(Pt,{modelValue:Q.value,"onUpdate:modelValue":g[6]||(g[6]=h=>Q.value=h),"sidebar-open":k(P)},null,8,["modelValue","sidebar-open"])])],2),l(L,{class:"nav-overlay",active:R.value,onClick:g[7]||(g[7]=h=>R.value=!1)},null,8,["active"]),l(L,{class:"sidebar-overlay",active:k(P),onClick:g[8]||(g[8]=h=>P.value=!1)},null,8,["active"]),l(bt),Q.value===!1?(a(),_(Nt,{key:0,"sidebar-open":k(P)},null,8,["sidebar-open"])):j("",!0),l(mt)],2))}}});const mn=B(ln,[["__scopeId","data-v-576e3197"]]);export{mn as PrivateView,mn as default};
